<div align="center">

![header](https://capsule-render.vercel.app/api?type=waving&color=ffb3dc&height=180&section=header&text=Bootcamp%20AI%20RAG%20Tutor&fontSize=48&fontColor=ffffff&animation=fadeIn&fontAlignY=35&desc=Vector%20DB%20%7C%20Search%20Agent%20%7C%20Analysis%20Agent&descSize=18&descAlignY=60)

</div>



## 팀원 및 담당 업무
<p align="left" style="display: flex; align-items: center;">
  <img src="image/team.png" width="190" style="margin-left: 15px;" />
</p>
          
<table>
<tr>

<!-- 김가람 -->
<td align="center" width="200" style="vertical-align: top; padding: 15px;">
  <img src="image/한별이.webp" width="70" style="border-radius: 50%; alt="김가람"/>
  <h3 style="margin: 10px 0 5px 0;">김가람</h3>
  <p style="margin: 5px 0;">LLM Reasoning Agent Developer</p>
  <a href="https://github.com/gr-kim-94">
    <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/>
  </a>
</td>

<!-- 최자슈아주원 -->
<td align="center" width="200" style="vertical-align: top; padding: 15px;">
  <img src="image/케케로.webp" width="160" style="border-radius: 50%;" alt="최자슈아주원"/>
  <h3 style="margin: 10px 0 5px 0;">최자슈아주원</h3>
  <p style="margin: 5px 0;">Retrieval Agent Engineer</p>
  <a href="https://github.com/reasonableplan">
    <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/>
  </a>
</td>

<!-- 윤경은 -->
<td align="center" width="200" style="vertical-align: top; padding: 15px;">
  <img src="image/타마마.webp" width="120" style="border-radius: 50%;" alt="윤경은"/>
  <h3 style="margin: 10px 0 5px 0;">윤경은</h3>
  <p style="margin: 5px 0;">Vector DB Engineer(lectures)</p>
  <a href="https://github.com/ykgstar37-lab">
    <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/>
  </a>
</td>

<!-- 안해빙 -->
<td align="center" width="200" style="vertical-align: top; padding: 15px;">
  <img src="image/기로로.webp" width="110" style="border-radius: 50%;" alt="안혜빈"/>
  <h3 style="margin: 10px 0 5px 0;">안혜빈</h3>
  <p style="margin: 5px 0;">LLM Reasoning Agent Developer</p>
  <a href="https://github.com/hyebinhy">
    <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/>
  </a>
</td>

<!-- 정세연 -->
<td align="center" width="200" style="vertical-align: top; padding: 15px;">
  <img src="image/쿠루루.webp" width="98" style="border-radius: 50%;" alt="정세연"/>
  <h3 style="margin: 10px 0 5px 0;">정세연</h3>
  <p style="margin: 5px 0;">Vector DB Engineer(python)</p>
  <a href="https://github.com/wjdtpdus25">
    <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/>
  </a>
</td>

<!-- 신지용 -->
<td align="center" width="200" style="vertical-align: top; padding: 15px;">
  <img src="image/우주.webp" width="98" style="border-radius: 50%;" alt="신지용"/>
  <h3 style="margin: 10px 0 5px 0;">신지용</h3>
  <p style="margin: 5px 0;">Retrieval Agent Engineer</p>
  <a href="https://github.com/sjy361872">
    <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/>
  </a>
</td>

</tr>
</table>

<br><br>

## 프로젝트 주제 및 주제 설명 및 선정 이유

### 1. 주제 
> **개념·코드·실습 질문에 답변하는 RAG 기반 학습 지원 챗봇**

<br>

본 프로젝트는 **부트캠프 학습 자료(ipynb)** 와 **Python 공식 문서(Python 3 Documentation)** 를 
핵심 지식으로 활용하여 개념, 코드, 실습 질문에 답변할 수 있는
RAG(Retrieval-Augmented Generation) 기반 학습 도우미 챗봇을 개발하는 것을 목표로 한다.

수업에서 실제로 사용한 학습 자료를 중심으로 하되,
부족할 수 있는 언어 차원의 설명은 공식 문서로 보완하여
보다 정확하고 신뢰도 높은 학습 지원 환경을 제공한다.

<br>

### 2. 주제를 선택한 이유 
🔹 팀원 모두가 실제로 학습한 부트캠프 수업 자료를 그대로 활용 <br>

🔹 Markdown 설명 + Code 셀이 결합된 고품질 학습 데이터 <br>

🔹 Python 개념 및 문법 설명을 **공식 문서(Python Docs)** 로 보완하여 정확성 강화 <br>

🔹 “수업 범위 + 언어 공식 기준”이라는 명확한 질문 기준으로 학습 몰입도와 실용성 우수 <br>

🔹 RAG 구조(수집 → 임베딩 → 검색 → 생성)를 교육 관점에서 명확히 설명·구현·확장 가능한 주제 <br>

향후 Agent 확장 및 추가 데이터 소스 연계가 자연스러운 구조

<br>

### 3. 주요 기능
> 부트캠프 학습 자료를 기준으로 개념 설명, 코드 해석, 주제별 검색을 지원하는 RAG 학습 도우미

1️⃣ **개념 설명 질의응답** <br>
부트캠프 학습 자료와 Python 공식 문서를 기반으로 핵심 개념에 대한 질문에 정확한 답변을 제공한다.
- 예시 질문
  - “RAG가 뭐야?”
  - “Retriever의 역할이 뭐야?”
- 강의 자료의 설명을 우선적으로 활용하여 **수업 맥락에 맞는 답변**을 생성

2️⃣ **코드 역할 및 의도 설명** <br>
강의 자료 내 실습 코드 및 예제 코드를 대상으로 각 코드의 역할과 작성 의도를 자연어로 설명한다.
- 예시 질문
  - “이 코드에서 왜 이 부분이 필요한 거야?”
- 코드 셀과 연관된 Markdown 설명을 함께 참조하여 코드 중심 학습을 지원

3️⃣ **주차 · 주제 기반 검색** <br>
학습자가 특정 주차 또는 주제를 지정하여 관련된 강의 내용을 요약·정리할 수 있다.
- 예시 질문
  - “LangChain 배운 주차 내용만 정리해줘”
- Vector DB 기반 검색을 통해 **해당 범위의 강의 자료만 선별적으로 활용**

4️⃣ **학습 범위 기반 응답 생성 (RAG 구조)**
- Retriever를 통해 관련 문서를 검색
- 검색된 문서를 기반으로 LLM이 답변 생성
- 수업 자료 및 공식 문서를 벗어나지 않는 **신뢰도 높은 응답** 제공

<br><br>

## 프로젝트를 구성하는 디렉토리들과 파일들의 구조
</div>

```plaintext
SKN21_3rd_4Team
├── data/                          # RAG 학습 및 검색에 사용되는 데이터
│   ├── raw/                         # 원본 데이터 (강의 자료, 문서 등)
│   ├── query_enhancement/           # 질의 확장(Query Enhancement) 관련 데이터
│ 
├── docs/                          # 프로젝트 관련 문서 및 설명 자료
├── image/                         # README 및 UI에 사용되는 이미지 파일
├── notebooks/                     # 실험 및 분석용 Jupyter Notebook
├── results/                       # 검색 결과, 실험 결과 저장
├── scripts/                       # 실행용 스크립트 모음
│
├── src/                           # 핵심 소스 코드
│   ├── agent/                       # Search / Analysis Agent 로직
│   ├── schema/                      # 데이터 및 응답 스키마 정의
│   ├── utils/                       # 공통 유틸리티 함수
│   ├── ingestion.py                 # 데이터 수집 및 전처리 파이프라인
│   ├── ingestion_lectures.py        # 강의 자료(ipynb) 수집 및 임베딩
│   ├── ingestion_rst.py             # 문서(rst 등) 수집 및 임베딩
│   └── vector_search.py             # Vector DB 기반 검색 로직
│
├── templates/                     # Flask 렌더링 템플릿
│
├── app.py                         # Flask 기반 웹 애플리케이션 진입점
├── main.py                        # 전체 파이프라인 실행 메인 파일
├── init_setting.py                # 초기 환경 및 설정 관리
│
├── intro.md                       # 프로젝트 소개 문서
├── README.md                      # 프로젝트 설명 문서
│
├── requirements.txt               # Python 패키지 의존성
├── pyproject.toml                 # 프로젝트 설정 및 빌드 정보
│
│
├── unit_test.ipynb                # 단위 테스트 및 기능 검증 노트북
└── utils.py                       # 보조 유틸리티 함수
```
<br>
<div> 

<br>



## Tech Stack
### Core Utilities & Environment
![ipykernel](https://img.shields.io/badge/ipykernel-CDB4DB?style=for-the-badge&logo=jupyter&logoColor=white)
![python-dotenv](https://img.shields.io/badge/python--dotenv-A8E6CF?style=for-the-badge&logo=dotenv&logoColor=black)
![pydantic](https://img.shields.io/badge/Pydantic-E92063?style=for-the-badge&logo=pydantic&logoColor=white)
![huggingface_hub](https://img.shields.io/badge/huggingface_hub-FFD21E?style=for-the-badge&logo=huggingface&logoColor=black)
![nbformat](https://img.shields.io/badge/nbformat-4B8BBE?style=for-the-badge&logo=python&logoColor=white)

### LLM & RAG 
![OpenAI](https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white)
![LangChain](https://img.shields.io/badge/LangChain-EEDFCC?style=for-the-badge&logo=chainlink&logoColor=white)
![LangGraph](https://img.shields.io/badge/LangGraph-005571?style=for-the-badge&logo=graphql&logoColor=white)
![langchain_openai](https://img.shields.io/badge/langchain__openai-412991?style=for-the-badge&logo=openai&logoColor=white)
![langchain_community](https://img.shields.io/badge/langchain__community-2F4F4F?style=for-the-badge&logo=chainlink&logoColor=white)
![langchain_tavily](https://img.shields.io/badge/langchain--tavily-DADADA?style=for-the-badge&logo=internetexplorer&logoColor=white)
![langchain_qdrant](https://img.shields.io/badge/langchain__qdrant-FF6F00?style=for-the-badge&logo=qdrant&logoColor=white)
![Sentence--Transformers](https://img.shields.io/badge/Sentence--Transformers-2B7CD3?style=for-the-badge&logo=pytorch&logoColor=white)

### Vector Database
![Qdrant](https://img.shields.io/badge/Qdrant-FF69B4?style=for-the-badge&logo=qdrant&logoColor=white)
![qdrant-client](https://img.shields.io/badge/qdrant--client-4C72B0?style=for-the-badge&logo=qdrant&logoColor=white)

### Backend / View
![Flask](https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=flask&logoColor=white)

<br><br>

## 수집 데이터 설명
- 부트캠프 수업 자료 (`.ipynb`)
  - Markdown 셀: 개념 설명, 이론 정리
  - Code 셀: 실습 코드, 예제 구현

- Python 공식 문서 (`Python 3 Documentation`)
  - Python 문법 및 표준 라이브러리 설명
  - 언어 차원의 개념, 함수, 동작 원리 보완
  - 공식 기준에 따른 정확한 설명 제공
#### 출처 [Python 3 Documentation](https://docs.python.org/ko/3/download.html)
<br>

▪️ 내부 학습 자료 + 공식 문서 결합으로 데이터 신뢰도 극대화 <br>
▪️ 외부 블로그·비공식 자료에 의존하지 않는 정제된 RAG 데이터 구성

<br><br>

## 데이터 베이스 테이블 설명

<br><br>

## Application의 주요 기능

### 하이브리드 검색 (Vector + Keyword + BM25)

본 프로젝트는 검색 품질 향상을 위해 **하이브리드 검색** 방식을 채택했습니다.

#### 목표
- **강의 노트(lecture)** + **Python 공식문서(python_doc, RST)** 를 동시에 활용하는 RAG에서 검색 품질 향상

#### 핵심 아이디어
하이브리드 검색은 Qdrant 벡터 검색 결과에 대해 세 가지 점수를 **가중합**으로 결합하여 최종 점수를 계산합니다:

- **Vector score** (의미 유사도): 임베딩 벡터 간 코사인 유사도
- **Keyword matching** (정확 용어 포함 여부): 질문의 키워드가 문서에 포함되어 있는지 확인
- **BM25** (Best Matching 25): 키워드 빈도/문서 길이 기반 sparse 점수 (TF-IDF 개선 버전)

#### 동적 가중치
쿼리 유형에 따라 가중치를 자동 조정합니다:

- **일반 쿼리**: Vector 0.6 / Keyword 0.2 / BM25 0.2
- **단일 단어 쿼리**: Vector 0.4 / Keyword 0.3 / BM25 0.3 (정확 용어 매칭 강화)

#### 검색 방식 상세

**1. 키워드 매칭 (Keyword Matching)**
- 질문에서 키워드 추출 (공백 기준, 2글자 이상)
- 각 문서에서 키워드 포함 여부 확인
  - 정확한 단어 매칭 (우선순위 높음)
  - 부분 문자열 매칭 (예: "trimming"이 "trimming_history"에 포함)
- 매칭된 키워드 비율로 점수 계산 (0.0 ~ 1.0)

**2. BM25 (Best Matching 25)**
- **TF (Term Frequency)**: 키워드가 문서에 나타나는 빈도
- **IDF (Inverse Document Frequency)**: 키워드가 드물수록 높은 점수
- **문서 길이 정규화**: 긴 문서는 불리하지 않도록 정규화
- 세 가지를 결합하여 최종 점수 계산

**3. 후보 확장 (candidate_k)**
- 벡터 검색만으로는 정확한 키워드를 포함한 문서를 놓칠 수 있음
- 벡터 단계에서 후보를 넉넉히 확보 (예: `candidate_k = top_k * 4~6`)
- 그 후보들을 하이브리드 점수로 재정렬하여 최종 `top_k` 반환
- → **Recall과 정확도 동시 개선**

**4. 듀얼 쿼리 + Fallback (python_doc 최적화)**
- Python 공식 문서는 영어이므로 한글 질문의 경우 **영어 키워드 검색**을 기본으로 사용
- 번역 결과가 약하면 (최고 점수 < 0.45) **한글 원문으로 fallback 검색** 추가
- 안전장치 확보로 검색 품질 보장

**5. 전처리/인제스트 (검색 품질을 위한 문서 강화)**
- **RST (python_doc)**: RST 노이즈 제거 + 섹션 기반 청킹 + `[API]/[KEYWORDS]/[TITLE]/[H1]/[H2]` 프리픽스 주입
- **Lecture**: 마크다운/코드 노이즈 제거 + 너무 짧은 셀 제거 + `[강의]/[섹션]` 문맥 프리픽스 주입

#### 검색 과정 흐름도

다음은 전체 검색 프로세스를 나타내는 흐름도입니다:

<p align="center">
  <img src="docs/mermaid-diagram-2026-01-08-091520.png" alt="검색 과정 흐름도" width="800"/>
</p>

**흐름도 주요 단계:**
1. **사용자 질문** → **검색 LLM**에서 질문 분석 및 검색 파라미터 결정
2. **top_k 결정**: 검색할 결과 개수 결정 (기본=3, 중급=5, 고급=7)
3. **sources 결정**: 검색할 소스 결정 (`lecture`, `python_doc`)
4. **소스별 검색**:
   - **lecture**: 한글 원문으로 직접 하이브리드 검색
   - **python_doc**: 한글 질문일 경우 영어 키워드로 번역 후 검색 (번역 결과가 약하면 fallback)
5. **결과 병합 및 중복 제거**: 여러 소스에서 가져온 결과 통합
6. **점수순 정렬 후 top_k 반환**: 하이브리드 점수 기준으로 정렬하여 최종 결과 반환

<br><br>

## 회고

| 이름 | 역할 | 소감 |
|-----------|-----------|-----------|
| **대가람** | LLM Reasoning Agent Developer |   |
| **지드래곤** | Search & Retrieval Agent Developer |   |
| **좌슈아주원** | Search & Retrieval Agent Developer |  |
| **윤경은** | Lecture Data Ingestion Engineer |  |
| **앙해빙** | LLM Reasoning Agent Developere |    |
| **세여닝** | Text Data Vectorization Engineer |    |

