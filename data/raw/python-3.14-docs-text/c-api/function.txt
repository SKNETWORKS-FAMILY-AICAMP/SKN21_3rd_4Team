함수 객체
*********

파이썬 함수와 관련된 몇 가지 함수가 있습니다.

type PyFunctionObject

   함수에 사용되는 C 구조체.

PyTypeObject PyFunction_Type

   이것은 "PyTypeObject"의 인스턴스이며 파이썬 함수 형을 나타냅니다.
   파이썬 프로그래머에게 "types.FunctionType"으로 노출됩니다.

int PyFunction_Check(PyObject *o)

   *o*가 함수 객체("PyFunction_Type" 형)면 참을 반환합니다. 매개 변수
   는 "NULL"이 아니어야 합니다. 이 함수는 항상 성공합니다.

PyObject *PyFunction_New(PyObject *code, PyObject *globals)
    *반환값: 새 참조.*

   코드 객체 *code*와 연관된 새 함수 객체를 반환합니다. *globals*는 함
   수에서 액세스할 수 있는 전역 변수가 있는 딕셔너리이어야 합니다.

   함수의 독스트링과 이름은 코드 객체에서 가져옵니다. "__module__"은
   *globals*에서 가져옵니다. 인자 기본값, 어노테이션 및 클로저는
   "NULL"로 설정됩니다. "__qualname__"은 코드 객체의 "co_qualname" 필
   드와 같은 값으로 설정됩니다.

PyObject *PyFunction_NewWithQualName(PyObject *code, PyObject *globals, PyObject *qualname)
    *반환값: 새 참조.*

   "PyFunction_New()"와 비슷하지만, 함수 객체의 "__qualname__" 어트리
   뷰트를 설정할 수도 있도록 합니다. *qualname*는 유니코드 객체나
   "NULL"이어야 합니다; "NULL"이면, "__qualname__" 어트리뷰트는 코드
   객체의 "co_qualname" 필드와 같은 값으로 설정됩니다.

   Added in version 3.3.

PyObject *PyFunction_GetCode(PyObject *op)
    *반환값: 빌린 참조.*

   함수 객체 *op*와 연관된 코드 객체를 반환합니다.

PyObject *PyFunction_GetGlobals(PyObject *op)
    *반환값: 빌린 참조.*

   함수 객체 *op*와 연관된 전역 딕셔너리를 반환합니다.

PyObject *PyFunction_GetModule(PyObject *op)
    *반환값: 빌린 참조.*

   함수 객체 *op*의 "__module__" 어트리뷰트에 대한 *빌린 참조*를 반환
   합니다. *NULL*일 수 있습니다.

   이것은 일반적으로 모듈 이름을 포함하는 "문자열"이지만, 파이썬 코드
   로 다른 객체로 설정할 수 있습니다.

PyObject *PyFunction_GetDefaults(PyObject *op)
    *반환값: 빌린 참조.*

   함수 객체 *op*의 인자 기본값을 반환합니다. 이는 인자의 튜플이나
   "NULL"일 수 있습니다.

int PyFunction_SetDefaults(PyObject *op, PyObject *defaults)

   함수 객체 *op*의 인자 기본값을 설정합니다. *defaults*는 "Py_None"
   이나 튜플이어야 합니다.

   실패하면 "SystemError"를 발생시키고 "-1"을 반환합니다.

void PyFunction_SetVectorcall(PyFunctionObject *func, vectorcallfunc vectorcall)

   Set the vectorcall field of a given function object *func*.

   Warning: extensions using this API must preserve the behavior of
   the unaltered (default) vectorcall function!

   Added in version 3.12.

PyObject *PyFunction_GetKwDefaults(PyObject *op)
    *반환값: 빌린 참조.*

   Return the keyword-only argument default values of the function
   object *op*. This can be a dictionary of arguments or "NULL".

int PyFunction_SetKwDefaults(PyObject *op, PyObject *defaults)

   Set the keyword-only argument default values of the function object
   *op*. *defaults* must be a dictionary of keyword-only arguments or
   "Py_None".

   This function returns "0" on success, and returns "-1" with an
   exception set on failure.

PyObject *PyFunction_GetClosure(PyObject *op)
    *반환값: 빌린 참조.*

   함수 객체 *op*와 연관된 클로저를 반환합니다. 이것은 "NULL" 이나 셀
   객체의 튜플일 수 있습니다.

int PyFunction_SetClosure(PyObject *op, PyObject *closure)

   함수 객체 *op*와 연관된 클로저를 설정합니다. *closure*는 "Py_None"
   이나 셀 객체의 튜플이어야 합니다.

   실패하면 "SystemError"를 발생시키고 "-1"을 반환합니다.

PyObject *PyFunction_GetAnnotations(PyObject *op)
    *반환값: 빌린 참조.*

   함수 객체 *op*의 어노테이션을 반환합니다. 이것은 가변 딕셔너리나
   "NULL" 일 수 있습니다.

int PyFunction_SetAnnotations(PyObject *op, PyObject *annotations)

   함수 객체 *op*의 어노테이션을 설정합니다. *annotations*은 딕셔너리
   나 "Py_None" 이어야 합니다.

   실패하면 "SystemError"를 발생시키고 "-1"을 반환합니다.

PyObject *PyFunction_GET_CODE(PyObject *op)
PyObject *PyFunction_GET_GLOBALS(PyObject *op)
PyObject *PyFunction_GET_MODULE(PyObject *op)
PyObject *PyFunction_GET_DEFAULTS(PyObject *op)
PyObject *PyFunction_GET_KW_DEFAULTS(PyObject *op)
PyObject *PyFunction_GET_CLOSURE(PyObject *op)
PyObject *PyFunction_GET_ANNOTATIONS(PyObject *op)
    *반환값: 빌린 참조.*

   These functions are similar to their "PyFunction_Get*"
   counterparts, but do not do type checking. Passing anything other
   than an instance of "PyFunction_Type" is undefined behavior.

int PyFunction_AddWatcher(PyFunction_WatchCallback callback)

   Register *callback* as a function watcher for the current
   interpreter. Return an ID which may be passed to
   "PyFunction_ClearWatcher()". In case of error (e.g. no more watcher
   IDs available), return "-1" and set an exception.

   Added in version 3.12.

int PyFunction_ClearWatcher(int watcher_id)

   Clear watcher identified by *watcher_id* previously returned from
   "PyFunction_AddWatcher()" for the current interpreter. Return "0"
   on success, or "-1" and set an exception on error (e.g.  if the
   given *watcher_id* was never registered.)

   Added in version 3.12.

type PyFunction_WatchEvent

      Enumeration of possible function watcher events:

      * "PyFunction_EVENT_CREATE"

      * "PyFunction_EVENT_DESTROY"

      * "PyFunction_EVENT_MODIFY_CODE"

      * "PyFunction_EVENT_MODIFY_DEFAULTS"

      * "PyFunction_EVENT_MODIFY_KWDEFAULTS"

   Added in version 3.12.

typedef int (*PyFunction_WatchCallback)(PyFunction_WatchEvent event, PyFunctionObject *func, PyObject *new_value)

   Type of a function watcher callback function.

   If *event* is "PyFunction_EVENT_CREATE" or
   "PyFunction_EVENT_DESTROY" then *new_value* will be "NULL".
   Otherwise, *new_value* will hold a *borrowed reference* to the new
   value that is about to be stored in *func* for the attribute that
   is being modified.

   The callback may inspect but must not modify *func*; doing so could
   have unpredictable effects, including infinite recursion.

   If *event* is "PyFunction_EVENT_CREATE", then the callback is
   invoked after *func* has been fully initialized. Otherwise, the
   callback is invoked before the modification to *func* takes place,
   so the prior state of *func* can be inspected. The runtime is
   permitted to optimize away the creation of function objects when
   possible. In such cases no event will be emitted. Although this
   creates the possibility of an observable difference of runtime
   behavior depending on optimization decisions, it does not change
   the semantics of the Python code being executed.

   If *event* is "PyFunction_EVENT_DESTROY",  Taking a reference in
   the callback to the about-to-be-destroyed function will resurrect
   it, preventing it from being freed at this time. When the
   resurrected object is destroyed later, any watcher callbacks active
   at that time will be called again.

   If the callback sets an exception, it must return "-1"; this
   exception will be printed as an unraisable exception using
   "PyErr_WriteUnraisable()". Otherwise it should return "0".

   There may already be a pending exception set on entry to the
   callback. In this case, the callback should return "0" with the
   same exception still set. This means the callback may not call any
   other API that can set an exception unless it saves and clears the
   exception state first, and restores it before returning.

   Added in version 3.12.
