# ğŸ¯ í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ í•œëˆˆì— ë³´ê¸°

> **ëª©í‘œ:** Flask ì•± â†’ Django ë³€í™˜ â†’ EC2 ë°°í¬

---

## ğŸ“Š ì „ì²´ êµ¬ì¡° (5ì´ˆ ìš”ì•½)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ ì‚¬ìš©ì    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ë¸Œë¼ìš°ì €ë¡œ ì ‘ì†
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        AWS EC2 ì„œë²„ (í´ë¼ìš°ë“œ)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ³ Docker ì»¨í…Œì´ë„ˆë“¤       â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Nginx (ì›¹ ì„œë²„)        â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚          â”‚                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Django (ë°±ì—”ë“œ/í”„ë¡ íŠ¸) â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - main.html (ë©”ì¸)    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - Chat API           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - Quiz API           â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚          â”‚ main() í˜¸ì¶œ      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ RAG ì‹œìŠ¤í…œ (ì™„ì„±ë¨)    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚          â”‚ ë²¡í„° ê²€ìƒ‰        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Qdrant (ë²¡í„° DB)       â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ íŒ€ ì—­í•  ë¶„ë‹´

```mermaid
graph LR
    A[ì„¸ì—°<br/>UI ë””ìì¸] -.ì•„ì´ë””ì–´.-> B
    
    B[ì£¼ì›<br/>Django ë¦¬ë“œ<br/>ë©”ì¸ UI<br/>Chat API]
    C[ê²½ì€<br/>Quiz API<br/>CSS/JS<br/>]
    D[ì§€ìš©<br/>EC2 ë°°í¬<br/>ì¸í”„ë¼]
    
    B --> E[Django ì™„ì„±]
    C --> E
    D --> E
    
    E --> F[ğŸš€ ë°°í¬]
    
    style A fill:#FFE4E1
    style B fill:#E1F5FF
    style C fill:#E1FFE4
    style D fill:#FFE1F5
    style E fill:#FFFACD
    style F fill:#90EE90
```

**í•µì‹¬:**
- **ì„¸ì—°** = ë””ìì¸ ì•„ì´ë””ì–´ë§Œ (ê°œë°œ X)
- **ì£¼ì›** = Django + ë©”ì¸ UI + Chat API
- **ê²½ì€** = Quiz API + CSS/JS(**ê°„ì†Œí™”!**)
- **ì§€ìš©** = EC2 ë°°í¬ + ì •ì  íŒŒì¼ ì„¤ì •

---

## ğŸ”„ ì‘ì—… íë¦„ (ì‚¬ìš©ìê°€ ì§ˆë¬¸í•˜ë©´?)

```mermaid
sequenceDiagram
    actor ì‚¬ìš©ì
    participant ë¸Œë¼ìš°ì €
    participant Nginx
    participant Django
    participant RAG
    participant Qdrant

    ì‚¬ìš©ì->>ë¸Œë¼ìš°ì €: "Djangoê°€ ë­ì•¼?"
    ë¸Œë¼ìš°ì €->>Nginx: HTTP ìš”ì²­
    Nginx->>Django: í”„ë¡ì‹œ
    Django->>Django: main.html ë Œë”ë§
    Django-->>ë¸Œë¼ìš°ì €: HTML ì‘ë‹µ
    
    ë¸Œë¼ìš°ì €->>Django: AJAX: /api/chat/stream
    Django->>RAG: main(ì§ˆë¬¸) í˜¸ì¶œ
    RAG->>Qdrant: ë²¡í„° ê²€ìƒ‰
    Qdrant-->>RAG: ê´€ë ¨ ë¬¸ì„œ
    RAG->>RAG: OpenAIë¡œ ë‹µë³€ ìƒì„±
    RAG-->>Django: ê²°ê³¼ ë°˜í™˜
    Django-->>ë¸Œë¼ìš°ì €: SSE ìŠ¤íŠ¸ë¦¬ë°
    ë¸Œë¼ìš°ì €->>ì‚¬ìš©ì: ë‹µë³€ í‘œì‹œ
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡° (ê°„ì†Œí™” ë²„ì „)

```
SKN21_3rd_4Team/
â”‚
â”œâ”€â”€ ğŸ†• django_app/          â† ì£¼ì›Â·ê²½ì€Â·ì§€ìš©ì´ ìƒˆë¡œ ë§Œë“¦
â”‚   â”œâ”€â”€ manage.py
â”‚   â”‚
â”‚   â”œâ”€â”€ config/             â† ì£¼ì›
â”‚   â”‚   â”œâ”€â”€ settings.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ middleware.py   â† ê²½ì€ (ì—ëŸ¬ í•¸ë“¤ë§)
â”‚   â”‚
â”‚   â”œâ”€â”€ apps/
â”‚   â”‚   â”œâ”€â”€ chat/           â† ì£¼ì› (Chat API)
â”‚   â”‚   â””â”€â”€ quiz/           â† ê²½ì€ (Quiz API)
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/          â† 2ê°œë§Œ!
â”‚   â”‚   â”œâ”€â”€ base.html       â† ì£¼ì›
â”‚   â”‚   â””â”€â”€ main.html       â† ì£¼ì› (ì„¸ì—° ë””ìì¸ ì°¸ê³ )
â”‚   â”‚
â”‚   â””â”€â”€ static/             â† ê°„ì†Œí™”!
â”‚       â”œâ”€â”€ css/
â”‚       â”‚   â”œâ”€â”€ base.css    â† ê²½ì€
â”‚       â”‚   â””â”€â”€ main.css    â† ê²½ì€
â”‚       â”œâ”€â”€ js/
â”‚       â”‚   â”œâ”€â”€ chat.js     â† ê²½ì€
â”‚       â”‚   â””â”€â”€ quiz.js     â† ê²½ì€
â”‚       â””â”€â”€ images/
â”‚
â”œâ”€â”€ âœ… main.py              â† ì™„ì„±ë¨ (ê±´ë“œë¦¬ì§€ ë§ ê²ƒ!)
â”œâ”€â”€ âœ… src/                 â† ì™„ì„±ë¨ (RAG ì‹œìŠ¤í…œ)
â”œâ”€â”€ âœ… data/                â† ì™„ì„±ë¨ (ê°•ì˜ ìë£Œ)
â”‚
â”œâ”€â”€ âœ… deploy/              â† ì§€ìš© (ì™„ë£Œ)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ nginx.conf
â”‚
â””â”€â”€ âŒ app.py               â† Flask (Djangoë¡œ ëŒ€ì²´)
    â””â”€â”€ templates/index.html  â† 2177ì¤„ (ë¶„í•  ì˜ˆì •)
```

---

## ğŸ¨ ì§€ê¸ˆ í•  ì¼ (ìš°ì„ ìˆœìœ„)

### 1ë‹¨ê³„: Django í”„ë¡œì íŠ¸ ìƒì„± (ì£¼ì›)
```bash
cd SKN21_3rd_4Team
django-admin startproject config django_app
cd django_app
python manage.py startapp chat
python manage.py startapp quiz
```

### 2ë‹¨ê³„: UI ë¶„í•  (ì£¼ì› + ê²½ì€)
- **ì£¼ì›**: `index.html` â†’ `base.html` + `main.html`
- **ê²½ì€**: CSS ì¶”ì¶œ â†’ `base.css` + `main.css` (2ê°œë§Œ!)
- **ê²½ì€**: JS ì¶”ì¶œ â†’ `chat.js` + `quiz.js`

### 3ë‹¨ê³„: API ì´ê´€ (ì£¼ì› + ê²½ì€)
- **ì£¼ì›**: Chat API (SSE ìŠ¤íŠ¸ë¦¬ë°)
- **ê²½ì€**: Quiz API

### 4ë‹¨ê³„: ë°°í¬ (ì§€ìš©)
```bash
cd deploy
docker-compose up -d
```

---

## âš¡ í•µì‹¬ í¬ì¸íŠ¸

### âœ… DO (í•´ì•¼ í•  ê²ƒ)
- Djangoì—ì„œ `from main import main` í˜¸ì¶œ
- Flask `app.py` ë¡œì§ì„ Djangoë¡œ ë³µì‚¬
- API ê²½ë¡œ ë™ì¼í•˜ê²Œ ìœ ì§€
- CSS/JSë¥¼ `static/` í´ë”ë¡œ ë¶„ë¦¬

### âŒ DON'T (í•˜ì§€ ë§ ê²ƒ)
- `main.py`, `src/` í´ë” **ì ˆëŒ€ ìˆ˜ì • ê¸ˆì§€**
- API ì‘ë‹µ í˜•ì‹ ë³€ê²½ ê¸ˆì§€
- ë¶ˆí•„ìš”í•œ ê¸°ëŠ¥ ì¶”ê°€ ê¸ˆì§€ (ê°„ì†Œí™”!)

---

## ğŸš€ ì™„ì„±ë˜ë©´?

```
http://<EC2_IP>/

â†’ Djangoê°€ main.html ë Œë”ë§
â†’ JavaScriptê°€ /api/chat/ í˜¸ì¶œ
â†’ Djangoê°€ main() í˜¸ì¶œ
â†’ RAG ì‹œìŠ¤í…œì´ ë‹µë³€ ìƒì„±
â†’ ë¸Œë¼ìš°ì €ì— ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ

âœ¨ ì™„ì„±! âœ¨
```

---

## ğŸ†š ê°„ì†Œí™” ìš”ì•½

| í•­ëª©          | ì´ì „ ê³„íš | ìµœì¢… (ê°„ì†Œí™”)          |
| ------------- | --------- | ---------------------- |
| **í…œí”Œë¦¿**    | 3ê°œ       | âœ… **2ê°œ** (base, main) |
| **CSS**       | 3ê°œ       | âœ… **2ê°œ** (base, main) |
| **JS**        | 2ê°œ       | âœ… 2ê°œ (chat, quiz)     |
| **ë„ì›€ UI**   | í¬í•¨      | âŒ **ì œê±°**             |
| **Health**    | API í¬í•¨  | âŒ **ì œê±°**             |
| **ê²½ì€ ì‘ì—…** | ë§ìŒ      | âœ… **ê°„ì†Œí™”!**          |

---

> **ê°„ì†Œí™” ì´ìœ :** 3ì¼ í”„ë¡œì íŠ¸ â†’ í•µì‹¬ ê¸°ëŠ¥(Chat+Quiz)ì—ë§Œ ì§‘ì¤‘!
